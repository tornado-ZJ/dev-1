mianfeihuiyuan = {}
local cfg_huiyuan = {
    var = {
        cur_VIP = "VIP_当前会员等级",
        mon_number = "VIP_当前杀怪数量",
    },
    msg = {
        chenggong = '{"Msg":"<font color=\'#ff0000\'>升级成功！</font>","Type":9}',
    },
    id = 309,
    [1] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 1%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 1
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [2] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 2%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 2
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [3] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 3%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 3
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [4] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 4%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 4
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [5] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 5%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 5
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [6] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 6%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 6
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [7] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 7%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 7
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [8] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 8%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 8
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [9] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 9%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 9
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
}
local cfg_renwu = {
    [1] = {
        ---1 转生等级任务 2 杀怪任务 3 装备任务 4 等级任务
        [1] = {
            number = 1,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            level = 50,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            level = 10,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [2] = {
        [1] = {
            number = 2,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [3] = {
        [1] = {
            number = 3,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [4] = {
        [1] = {
            number = 4,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [5] = {
        [1] = {
            number = 5,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [6] = {
        [1] = {
            number = 6,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [7] = {
        [1] = {
            number = 7,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [8] = {
        [1] = {
            number = 8,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            type = "level",
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    },
    [9] = {
        [1] = {
            number = 9,
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [2] = {
            type = "shaguai",
            number = 100,
            renwu = "击杀<font color='#01f801'>50级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            type = "zhuangbei",
            number = 6,
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10阶</font>以上装备",
        },
        [4] = {
            type = "level",
            number = 100,
            renwu = "角色等级达到<font color='#01f801'>100级</font>",
        },
    }
}
local GUIparent = ""
local Win_W, Win_H = 815, 575
local last_btn = 1
local color = {
    [1] = "#787974",
    [2] = "#FFFC55"
}
local cur_VIP = 0
local zhuansheng_level = 0
local mon_number = 0
local zhuangbei = 0
local level = 0

mianfeihuiyuan.main = function()
    SL:SubmitForm("A/免费会员", "SyncResponse")
end
mianfeihuiyuan.main()
----同步信息
function mianfeihuiyuan.SyncResponse(data)
    --SL:print(data)
    local sendList = SL:JsonDecode(data)
    cur_VIP = sendList[1]
    zhuansheng_level = sendList[2]
    mon_number = sendList[3]
    zhuangbei = sendList[4]
    level = sendList[5]
    --SL:print("当前会员等级",cur_VIP)
    if not GUI:GetWindow(nil, "mianfeihuiyuan") then
        mianfeihuiyuan.createUI()
    else
        mianfeihuiyuan.updateUI(cur_VIP % #cfg_huiyuan + 1)
    end
end

mianfeihuiyuan.createUI = function()
    local _parent = GUI:Win_Create("mianfeihuiyuan", 0, 0, 0, 0, false, false, true, false)
    if _parent then
        GUIparent = _parent
        GUI:Timeline_Window1(_parent)
        local winSize = SL:GetScreenSize()
        local x = winSize.width / 2
        local y = winSize.height / 2
        local w = winSize.width
        local h = winSize.height

        local layout = GUI:Layout_Create(_parent, "diban", x, y, w, h)
        if layout then
            GUI:setAnchorPoint(layout, 0.5, 0.5)
        end
        --关闭背景
        local bg_close = GUI:Image_Create(_parent, "bg_close", 0, 0, "res/ui/npc/免费会员/1.png")
        if bg_close then
            GUI:setContentSize(bg_close, { width = w, height = h })
            GUI:setTouchEnabled(bg_close, true)
            GUI:addOnClickEvent(bg_close, function()
                GUI:Win_Close(_parent)
            end)
        end
        --背景框
        local img_bg = GUI:Image_Create(_parent, "img_bg", 162.00, 45.00, "res/ui/npc/免费会员/2.png")
        GUI:setContentSize(img_bg, 815, 575)
        GUI:setIgnoreContentAdaptWithSize(img_bg, false)
        GUI:setTouchEnabled(img_bg, true)
        GUI:setTag(img_bg, -1)

        -- Create 标题
        local text_title = GUI:Text_Create(_parent, "text_title", 223.00, 537.00, 20, "#ffeed9", [[免费会员]])
        GUI:setTouchEnabled(text_title, false)
        GUI:setTag(text_title, -1)

        -- Create 关闭按钮
        local btn_close = GUI:Button_Create(_parent, "btn_close", 856.00, 510.00, "res/ui/npc/免费会员/3.png")
        GUI:Button_loadTexturePressed(btn_close, "res/ui/npc/免费会员/4.png")
        GUI:Button_loadTextureDisabled(btn_close, "res/private/gui_edit/Button_Disable.png")
        GUI:setTouchEnabled(btn_close, true)
        GUI:setTag(btn_close, -1)
        GUI:addOnClickEvent(btn_close, function()
            GUI:Win_Close(_parent)
        end)
        --vip切换按钮的容器
        local listview_vip_btn = GUI:ListView_Create(_parent, "listview_vip_btn", 232.00, 70.00, 110.00, 340.00, 1)
        GUI:ListView_setBackGroundColorType(listview_vip_btn, 1)
        GUI:ListView_setBackGroundColor(listview_vip_btn, "#9696ff")
        GUI:ListView_setBackGroundColorOpacity(listview_vip_btn, 0)
        GUI:ListView_setBounceEnabled(listview_vip_btn, true)
        GUI:ListView_setItemsMargin(listview_vip_btn, 1)
        GUI:setTouchEnabled(listview_vip_btn, true)
        GUI:setTag(listview_vip_btn, -1)
        --vip切换按钮
        for i = 1, #cfg_huiyuan do
            local btn_huiyuan = GUI:Button_Create(listview_vip_btn, "btn_huiyuan"..i, 0,0,"res/ui/npc/免费会员/6.png")
            GUI:Button_loadTexturePressed(btn_huiyuan, "res/ui/npc/免费会员/7.png")
            GUI:Button_loadTextureDisabled(btn_huiyuan, "res/ui/npc/免费会员/7.png")
            GUI:setTouchEnabled(btn_huiyuan, true)
            GUI:setTag(btn_huiyuan, -1)
            GUI:Text_Create(btn_huiyuan, "text_btn_huiyuan", 35,5,18,color[1],"VIP"..i)
            GUI:addOnClickEvent(btn_huiyuan, function()
                mianfeihuiyuan.updateUI(i)
            end)
        end
        --vip等级标题
        local atlas_VIP = GUI:TextAtlas_Create(_parent, "atlas_VIP",427,375,8,"res/ui/npc/免费会员/8.png",19,25,0)
    --    vip描述
        GUI:RichText_Create(_parent, "richtext_vip", 360,280,cfg_huiyuan[1].miaoshu,190)

        -- VIP奖励
        local listview_VIP_jiangli = GUI:ListView_Create(_parent, "listview_VIP_jiangli", 456.00, 80.00, 300.00, 60, 2)
        GUI:ListView_setBackGroundColorType(listview_VIP_jiangli, 1)
        GUI:ListView_setBackGroundColor(listview_VIP_jiangli, "#9696ff")
        GUI:ListView_setBackGroundColorOpacity(listview_VIP_jiangli, 0)
        GUI:ListView_setBounceEnabled(listview_VIP_jiangli, false)
        GUI:ListView_setGravity(listview_VIP_jiangli, 3)
        GUI:ListView_setItemsMargin(listview_VIP_jiangli, 0)
        GUI:setTouchEnabled(listview_VIP_jiangli, false)
        GUI:setTag(listview_VIP_jiangli, -1)

        for i, v in ipairs(cfg_huiyuan[1].jiangli) do
            ---@type itemdata
            itemdata = {
                index = v[1],
                count = v[2],
                look = true,
                bgVisible = true
            }
            GUI:ItemShow_Create(listview_VIP_jiangli, "item_jiangli"..i, 0,0,itemdata)
        end
        --升级按钮
        local btn_VIP_shengji = GUI:Button_Create(_parent, "btn_VIP_shengji", 778.00, 88.00, "res/ui/npc/免费会员/6.png")
        GUI:Button_loadTexturePressed(btn_VIP_shengji, "res/ui/npc/免费会员/7.png")
        GUI:Button_loadTextureDisabled(btn_VIP_shengji, "res/private/gui_edit/Button_Disable.png")
        GUI:Button_setTitleColor(btn_VIP_shengji, color[2])
        GUI:Button_setTitleFontSize(btn_VIP_shengji, 18)
        GUI:Button_setTitleText(btn_VIP_shengji, "升级VIP")
        GUI:setTouchEnabled(btn_VIP_shengji, true)
        GUI:setTag(btn_VIP_shengji, -1)
        GUI:addOnClickEvent(btn_VIP_shengji, function()
            local cfg = cfg_renwu[cur_VIP + 1]
            if not (zhuansheng_level >= cfg[1].number
                    and mon_number >= cfg[2].number
                    and zhuangbei >= cfg[3].number
                    and level >= cfg[4].number)
            then
                SL:ShowSystemTips("请先完成任务！")
                return
            end
            SL:SubmitForm("A/免费会员","shengji")
        end)
        ---任务已升级按钮
        local img_VIP_yiwancheng = GUI:Image_Create(_parent, "img_VIP_yiwancheng", 784.00, 91.00, "res/ui/npc/免费会员/10.png")
        GUI:setTouchEnabled(img_VIP_yiwancheng, false)
        GUI:setTag(img_VIP_yiwancheng, -1)

        --任务显示
        local listview_VIP_renwu = GUI:ListView_Create(_parent, "listview_VIP_renwu", 539.00, 161.00, 350.00, 200.00, 1)
        GUI:ListView_setBackGroundColorType(listview_VIP_renwu, 1)
        GUI:ListView_setBackGroundColor(listview_VIP_renwu, "#9696ff")
        GUI:ListView_setBackGroundColorOpacity(listview_VIP_renwu, 0)
        GUI:ListView_setBounceEnabled(listview_VIP_renwu, true)
        GUI:setTouchEnabled(listview_VIP_renwu, true)
        GUI:ListView_setItemsMargin(listview_VIP_renwu, 5)
        GUI:setTag(listview_VIP_renwu, -1)
        ---请先完成前置任务
        local img_VIP_weiwancheng = GUI:Image_Create(_parent, "img_VIP_weiwancheng", 572.00, 261.00, "res/ui/npc/免费会员/12.png")
        GUI:setTouchEnabled(img_VIP_weiwancheng, false)
        GUI:setTag(img_VIP_weiwancheng, -1)
    end
    mianfeihuiyuan.updateUI(cur_VIP % #cfg_huiyuan + 1)
end

function mianfeihuiyuan.updateUI(pageindex)
    --更新界面 先将上一个按钮的状态清空，再设置点击的按钮状态，打开界面时，将界面和按钮设置为当前vip等级
    --1.将上一个按钮 解除
    local btn_huiyuan = GUI:GetWindow(GUIparent, "listview_vip_btn/btn_huiyuan"..last_btn)
    GUI:Button_setBrightEx(btn_huiyuan, true)
    GUI:Text_setTextColor(GUI:GetWindow(btn_huiyuan, "text_btn_huiyuan"), color[1])
    --2.点击按钮，将按钮 变亮 字体颜色变化 禁用按钮
    last_btn = pageindex
    local btn_huiyuan = GUI:GetWindow(GUIparent, "listview_vip_btn/btn_huiyuan"..last_btn)
    GUI:Button_setBrightEx(btn_huiyuan, false)
    GUI:Text_setTextColor(GUI:GetWindow(btn_huiyuan, "text_btn_huiyuan"), color[2])
    GUI:TextAtlas_setString(GUI:GetWindow(GUIparent,"atlas_VIP"),last_btn)
    --3.设置描述
    GUI:removeFromParent(GUI:GetWindow(GUIparent, "richtext_vip"))
    GUI:RichText_Create(GUIparent, "richtext_vip", 360,280,cfg_huiyuan[last_btn].miaoshu,190)
    --4.奖励物品显示
    local listview_VIP_jiangli = GUI:GetWindow(GUIparent, "listview_VIP_jiangli")
    GUI:removeAllChildren(listview_VIP_jiangli)
    for i, v in ipairs(cfg_huiyuan[last_btn].jiangli) do
        ---@type itemdata
        itemdata = {
            index = v[1],
            count = v[2],
            look = true,
            bgVisible = true
        }
        GUI:ItemShow_Create(listview_VIP_jiangli, "item_jiangli"..i, 0,0,itemdata)
    end

    ---5.升级按钮
    local btn_VIP_shengji = GUI:GetWindow(GUIparent, "btn_VIP_shengji")
    local img_VIP_yiwancheng = GUI:GetWindow(GUIparent, "img_VIP_yiwancheng")
    GUI:setVisible(btn_VIP_shengji, false)
    GUI:setVisible(img_VIP_yiwancheng, false)
    if last_btn < cur_VIP + 1 then
        GUI:setVisible(img_VIP_yiwancheng, true)
    end
    if last_btn == cur_VIP + 1 then
        GUI:setVisible(btn_VIP_shengji, true)
    end
    --    6.任务显示
    local listview_VIP_renwu = GUI:GetWindow(GUIparent, "listview_VIP_renwu")
    GUI:removeAllChildren(listview_VIP_renwu)
    local renwu_num = #cfg_renwu[last_btn]
    local limit = 2
    local item_w,item_h = 170,108
    local index = 0
    local num = math.ceil(renwu_num / limit)
    for i = 1, num do
        local layout_VIP_renwu = GUI:Layout_Create(listview_VIP_renwu, "layout_VIP_renwu"..i, 0.00, 0, 350.00, 105.00, false)
        GUI:Layout_setBackGroundColorType(layout_VIP_renwu, 1)
        GUI:Layout_setBackGroundColor(layout_VIP_renwu, "#96c8ff")
        GUI:Layout_setBackGroundColorOpacity(layout_VIP_renwu, 0)
        GUI:setTouchEnabled(layout_VIP_renwu, false)
        GUI:setTag(layout_VIP_renwu, -1)

        for j = 1, limit do
            index = index + 1
            if index <= renwu_num then
                local img_VIP_renwu = GUI:Image_Create(layout_VIP_renwu, "img_VIP_renwu"..index, (j - 1) * 180,0,"res/ui/npc/免费会员/11.png")
                GUI:setContentSize(img_VIP_renwu, {width = item_w, height = item_h})
                GUI:Text_Create(img_VIP_renwu, "text_VIP_renwu",10,73,15,"#ffffff", "任务"..index)
                --已完成
                local img_VIP_renwu_yiwancheng = GUI:Image_Create(img_VIP_renwu, "img_VIP_renwu_yiwancheng", 96.00, 72.00, "res/ui/npc/免费会员/13.png")
                GUI:setTouchEnabled(img_VIP_renwu_yiwancheng, false)
                GUI:setTag(img_VIP_renwu_yiwancheng, -1)
                --去完成
                local btn_VIP_renwu = GUI:Button_Create(img_VIP_renwu, "btn_VIP_renwu", 80.00, 70.00, "res/ui/npc/免费会员/6.png")
                GUI:Button_loadTexturePressed(btn_VIP_renwu, "res/ui/npc/免费会员/7.png")
                GUI:setContentSize(btn_VIP_renwu, 70, 25)
                GUI:setIgnoreContentAdaptWithSize(btn_VIP_renwu, false)
                GUI:Button_setTitleColor(btn_VIP_renwu, "#ffffff")
                GUI:Button_setTitleFontSize(btn_VIP_renwu, 16)
                GUI:Button_setTitleText(btn_VIP_renwu, "去完成")
                GUI:setTouchEnabled(btn_VIP_renwu, true)
                GUI:setTag(btn_VIP_renwu, -1)
                GUI:addOnClickEvent(btn_VIP_renwu, function()
                    SL:SubmitForm("A/免费会员", "quwancheng", (i - 1) * limit + j)
                end)
                local txt_handle = GUI:RichText_Create(img_VIP_renwu, "richtext_VIP_renwu", 12, 25, cfg_renwu[last_btn][index].renwu, 150,15)
            end
        end
    end
    mianfeihuiyuan:renwuxianshi(listview_VIP_renwu, limit, num, index)
end

---任务显示
function mianfeihuiyuan:renwuxianshi(listview_VIP_renwu, limit , num, index)
    local img_VIP_weiwancheng = GUI:GetWindow(GUIparent, "img_VIP_weiwancheng")
    GUI:setVisible(listview_VIP_renwu, false)
    GUI:setVisible(img_VIP_weiwancheng, false)

    if last_btn <= cur_VIP + 1  then
        GUI:setVisible(listview_VIP_renwu, true)
        GUI:setVisible(img_VIP_weiwancheng, false)
    end

    if last_btn > cur_VIP + 1  then
        GUI:setVisible(listview_VIP_renwu, false)
        GUI:setVisible(img_VIP_weiwancheng, true)
    end

    local cfg = cfg_renwu[cur_VIP + 1]
    local idx = 0
    for i = 1, num do
        local layout_VIP_renwu = GUI:GetWindow(listview_VIP_renwu, "layout_VIP_renwu"..i)
        for j = 1, limit do
            idx = idx + 1
            if idx <= index then
                local btn_VIP_renwu = GUI:GetWindow(layout_VIP_renwu, "img_VIP_renwu" .. idx .."/btn_VIP_renwu")
                local img_VIP_renwu_yiwancheng = GUI:GetWindow(layout_VIP_renwu, "img_VIP_renwu" .. idx .."/img_VIP_renwu_yiwancheng")
                GUI:setVisible(btn_VIP_renwu, false)
                GUI:setVisible(img_VIP_renwu_yiwancheng, false)
                --    1转生任务 2 杀怪任务 3 装备任务 4 等级任务
                if idx == 1 then
                    if zhuansheng_level >= cfg[1].number then
                        GUI:setVisible(btn_VIP_renwu, false)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, true)
                    else
                        GUI:setVisible(btn_VIP_renwu, true)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, false)
                    end
                elseif idx == 2 then
                    if mon_number >= cfg[2].number then
                        GUI:setVisible(btn_VIP_renwu, false)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, true)
                    else
                        GUI:setVisible(btn_VIP_renwu, true)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, false)
                    end
                elseif idx == 3 then
                    if zhuangbei >= cfg[3].number then
                        GUI:setVisible(btn_VIP_renwu, false)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, true)
                    else
                        GUI:setVisible(btn_VIP_renwu, true)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, false)
                    end
                elseif idx == 4 then
                    if level >= cfg[4].number then
                        GUI:setVisible(btn_VIP_renwu, false)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, true)
                    else
                        GUI:setVisible(btn_VIP_renwu, true)
                        GUI:setVisible(img_VIP_renwu_yiwancheng, false)
                    end
                end
            end
        end
    end

end


